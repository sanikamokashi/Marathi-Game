<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marathi Letter Match</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the game */
        body {
            font-family: "Inter", sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to start to allow space for level selector */
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 950px; /* Slightly wider to accommodate level selector */
            background-color: #ffffff; /* White background for the whole app area */
            border-radius: 0; /* Removed rounded corners */
            box-shadow: none; /* Removed box-shadow */
            padding: 1.5rem; /* Padding for the entire app content */
            border: none; /* Removed border */
        }

        /* Styles for the new dropdown level selector */
        .level-select-dropdown {
            padding: 0.7rem 1.5rem;
            font-size: 1.1rem;
            font-weight: bold;
            border: 2px solid #ADD8E6; /* Light blue border */
            border-radius: 0.75rem;
            background-color: #ADD8E6; /* Light blue solid color */
            color: #333;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            margin-bottom: 2rem; /* Space below the dropdown */
            appearance: none; /* Remove default dropdown arrow */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23333" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat;
            background-position: right 0.7rem top 50%;
            background-size: 1.5rem auto;
            min-width: 150px; /* Ensure it's wide enough for text */
            text-align: center;
        }

        .level-select-dropdown:hover {
            background-color: #6dd5ed; /* Slightly darker on hover */
            border-color: #6dd5ed;
        }

        .level-select-dropdown:focus {
            outline: none;
            border-color: #4682B4; /* Steel blue on focus */
            box-shadow: 0 0 0 3px rgba(70, 130, 180, 0.5);
        }

        .level-content {
            width: 100%;
            display: flex;
            flex-direction: column; /* Changed to column for Level 1 layout */
            justify-content: flex-start; /* Align content to top for Level 1 */
            align-items: center;
            min-height: 400px; /* Minimum height for level content area */
            text-align: center;
            font-size: 1.5rem;
            color: #555;
        }

        /* Existing game-container styles (now nested within .level-content for Level 2) */
        .game-container {
            position: relative; /* Needed for absolute positioning of SVG */
            background-color: #ffffff; /* This will be overridden by .app-container's background */
            border-radius: 1.5rem;
            box-shadow: none; /* Remove inner shadow as app-container has one */
            padding: 0; /* Remove inner padding as app-container handles it */
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            width: 100%;
            max-width: none; /* Let it expand within level-content */
            border: none; /* Remove inner border */
        }

        .columns-wrapper {
            display: flex;
            flex-direction: row; /* Always side-by-side columns */
            gap: 1.5rem; /* Gap between letter and picture sections */
            width: 100%; /* Take full width of game-container */
            justify-content: center;
            align-items: flex-start; /* Align sections to the top */
        }

        .letters-section, .pictures-section {
            display: flex;
            flex-direction: column; /* Items within these sections are in a column */
            gap: 0.8rem; /* Gap between individual letter/picture boxes */
            flex: 1; /* Allow both sections to grow and shrink equally */
            min-width: 120px; /* Minimum width for each column to hold items */
            box-sizing: border-box;
        }

        .letter-box, .picture-item {
            display: flex;
            flex-direction: column; /* Allow emoji and text to stack */
            justify-content: center;
            align-items: center;
            padding: 0.8rem;
            border-radius: 0.75rem;
            font-weight: bold;
            color: #333;
            background-color: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); /* Card-like shadow */
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.3s ease, background-color 0.3s ease;
            cursor: pointer; /* Indicate clickable for selection */
            border: 2px solid transparent; /* Default transparent border */
            width: 100px; /* Fixed width for square items */
            height: 100px; /* Fixed height for square items */
            box-sizing: border-box; /* Include padding in width/height */
            text-align: center; /* Center content like emoji */
            user-select: none; /* Prevent text selection */
            overflow: hidden; /* Hide overflowing content */
        }

        .letter-box {
            font-size: 1.8rem; /* Adjusted font size for letters */
            color: #007bff; /* Blue color for letters */
            background-color: #d0efff; /* Lighter blue background for letter boxes */
            border: 2px solid #8acaff;
        }

        .picture-item {
            background-color: #ffffff;
            border: 2px solid #cceeff; /* Light blue border for pictures */
        }

        .letter-box.selected, .picture-item.selected {
            border-color: #007bff; /* Highlight selected item with blue border */
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5); /* Glow effect */
        }

        .letter-box.matched, .picture-item.matched {
            border-color: #28a745; /* Green for matched */
            background-color: #d4edda;
            cursor: default; /* No longer clickable/draggable */
            pointer-events: none; /* Disable interaction */
        }

        .letter-box.incorrect, .picture-item.incorrect {
            border-color: #dc3545; /* Red for incorrect */
            background-color: #f8d7da;
        }

        .picture-item .emoji {
            font-size: 2.5rem; /* Adjusted emoji size */
            line-height: 1; /* Prevent extra space around emoji */
        }

        .picture-item .english-word {
            font-size: 0.8rem; /* Adjust as needed to fit */
            margin-top: 0.2rem; /* Small space below emoji */
            color: #555;
            display: none; /* Hidden by default */
            white-space: nowrap; /* Prevent word from wrapping */
            overflow: hidden; /* Hide overflow if it's too long */
            text-overflow: ellipsis; /* Add ellipsis if hidden */
        }
        /* When a picture is selected or matched, show the word */
        .picture-item.selected .english-word,
        .picture-item.matched .english-word {
            display: block; /* Show when selected or matched */
        }

        .feedback-message {
            text-align: center;
            font-size: 1rem; /* Reduced font size for feedback message */
            font-weight: bold;
            margin-top: 1rem;
            min-height: 30px; /* Reserve space */
            color: #333;
        }

        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1.5rem; /* Space from content above */
            width: 100%; /* Ensure buttons span full width */
        }

        .game-button {
            padding: 0.8rem 1.8rem;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: background-color 0.3s ease; /* Only background transition for flat look */
            box-shadow: none; /* Flat buttons, no shadow */
            background-color: #6495ED; /* Cornflower blue solid color */
            color: white;
            width: 100%; /* Make button take full width of its parent */
            max-width: 250px; /* Keep a max-width for the button itself if it gets too wide */
        }

        .game-button:hover {
            transform: none; /* No transform on hover for flat look */
            box-shadow: none; /* No shadow on hover */
            background-color: #4169E1; /* Slightly darker on hover */
        }

        .game-button:active {
            transform: none; /* No transform on active for flat look */
            box-shadow: none; /* No shadow on active */
        }

        #reset-btn {
            background-color: #FFD700; /* Gold solid color */
            color: #333;
        }

        #reset-btn:hover {
            background-color: #DAA520; /* Darker gold on hover */
        }

        /* SVG for drawing lines */
        .match-lines-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Important: allows clicks to pass through */
            z-index: 1; /* Ensure it's above background but below interactive elements */
            overflow: visible; /* Allow lines to extend slightly outside if needed */
        }
        .match-lines-svg line {
            stroke: #28a745; /* Green line */
            stroke-width: 2; /* Thinner line */
            stroke-linecap: round;
            stroke-dasharray: 8 8; /* Dotted line: 8px dash, 8px gap */
            transition: stroke-dashoffset 0.5s ease-out; /* For drawing animation */
            /* Initial state for drawing animation */
            stroke-dashoffset: 0; /* Start with no offset */
        }

        /* --- Level 1 Specific Styles --- */
        .level1-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .letter-row-display {
            display: flex;
            justify-content: center;
            gap: 0.8rem;
            flex-wrap: wrap; /* Allow letters to wrap if too many for one line */
        }

        .level1-letter-box {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 80px; /* Slightly smaller for more letters per row */
            height: 80px;
            padding: 0.5rem;
            border-radius: 0.75rem;
            font-size: 2rem; /* Larger font for single letters */
            font-weight: bold;
            color: #007bff;
            background-color: #d0efff;
            border: 2px solid #8acaff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
        }

        .level1-letter-box:hover {
            background-color: #a7d9f7;
            transform: translateY(-2px);
        }

        .level1-letter-box.selected {
            border-color: #007bff;
            background-color: #007bff;
            color: white;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            width: 100%; /* Span full width to push arrows to edges */
            max-width: 300px; /* Limit width of nav buttons container */
            margin-top: 1rem;
        }

        .nav-button {
            padding: 0.7rem 1.2rem;
            font-size: 1.5rem;
            font-weight: bold;
            border: none;
            border-radius: 0.75rem;
            cursor: pointer;
            background-color: #ADD8E6; /* Light blue solid color */
            color: #333;
            transition: background-color 0.3s ease;
        }

        .nav-button:hover {
            background-color: #6dd5ed;
        }

        .nav-button:disabled {
            background-color: #e0e0e0;
            color: #a0a0a0;
            cursor: not-allowed;
        }

        .picture-display {
            display: flex;
            flex-wrap: wrap; /* Allow pictures to wrap */
            justify-content: center;
            gap: 1rem; /* Gap between pictures */
            margin-top: 1.5rem;
            min-height: 150px; /* Ensure space even if no pictures */
        }

        .level1-picture-item {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100px; /* Fixed size for pictures */
            height: 100px;
            padding: 0.5rem;
            border-radius: 0.75rem;
            background-color: #ffffff;
            border: 2px solid #cceeff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            user-select: none;
            overflow: hidden; /* Hide overflowing text/emoji */
        }

        .level1-picture-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .level1-picture-item .emoji {
            font-size: 2.8rem; /* Larger emoji for Level 1 */
            line-height: 1;
        }

        .level1-picture-item .english-word {
            font-size: 0.7rem; /* Smaller font for English word to fit */
            margin-top: 0.2rem;
            color: #555;
            display: block; /* Always visible in Level 1 after click */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* --- Level 3 Specific Styles --- */
        .level3-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            width: 100%;
            max-width: 600px; /* Constrain width for better layout */
            padding: 1.5rem;
            background-color: #e6f2ff; /* Lightest blue background */
            border-radius: 1rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .level3-challenge-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            width: 100%;
        }

        .level3-picture-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #ffffff;
            border: 2px solid #ADD8E6;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 180px; /* Larger target for picture */
            height: 180px;
        }

        .level3-picture-display:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .level3-picture-display .emoji {
            font-size: 5rem; /* Very large emoji */
            line-height: 1;
        }

        .level3-picture-display .marathi-word { /* Changed from .english-word */
            font-size: 1.1rem;
            font-weight: bold;
            color: #555;
            margin-top: 0.5rem;
        }

        .level3-options-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap; /* Allow options to wrap on smaller screens */
            width: 100%;
        }

        .level3-option-box {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 120px; /* Fixed width for options */
            height: 120px; /* Fixed height for options */
            background-color: #ffffff;
            border: 2px solid #cceeff;
            border-radius: 1rem;
            font-size: 3rem; /* Large font for options */
            font-weight: bold;
            color: #007bff;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            user-select: none;
        }

        .level3-option-box:hover {
            background-color: #e0f2ff;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .level3-option-box.selected {
            border-color: #007bff;
            box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.5);
        }

        .level3-option-box.correct {
            background-color: #d4edda; /* Light green */
            border-color: #28a745; /* Green */
            color: #155724; /* Darker green text */
        }

        .level3-option-box.incorrect {
            background-color: #f8d7da; /* Light red */
            border-color: #dc3545; /* Red */
            color: #721c24; /* Darker red text */
            animation: shake 0.3s; /* Add shake animation */
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .level3-feedback-message {
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 1rem;
            min-height: 30px; /* Reserve space */
            color: #333;
        }

        .level3-next-button {
            padding: 0.8rem 2rem;
            font-size: 1.2rem;
            font-weight: bold;
            border: none;
            border-radius: 0.75rem;
            cursor: pointer;
            background-color: #6495ED; /* Cornflower blue */
            color: white;
            transition: background-color 0.3s ease;
            margin-top: 1.5rem;
        }

        .level3-next-button:hover {
            background-color: #4169E1; /* Darker blue */
        }

        .level3-next-button:disabled {
            background-color: #e0e0e0;
            color: #a0a0a0;
            cursor: not-allowed;
        }

        /* Styles for placeholder levels */
        .placeholder-level {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 300px; /* Adjust as needed */
            font-size: 2rem;
            font-weight: bold;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <select id="level-select-dropdown" class="level-select-dropdown">
            <option value="1">Level 1</option>
            <option value="2">Level 2</option>
            <option value="3">Level 3</option>
            <option value="4">Level 4</option>
            <option value="5">Level 5</option>
        </select>

        <div id="level-content" class="level-content">
            <!-- Level content will be loaded here by JavaScript -->
        </div>
    </div>

    <script>
        // Expanded data for the game: Marathi letters, their corresponding words, and emojis
        const allGameData = [
            // Primary list (used by Level 2)
            { letter: '‡§ï', wordMarathi: '‡§ï‡§™', englishWord: 'cup', emoji: '‚òï', audioText: '‡§ï‡§™' },
            { letter: '‡§Æ', wordMarathi: '‡§Æ‡§æ‡§∏‡§æ', englishWord: 'masa', emoji: 'üê†', audioText: '‡§Æ‡§æ‡§∏‡§æ' },
            { letter: '‡§™', wordMarathi: '‡§™‡§§‡§Ç‡§ó', englishWord: 'patang', emoji: 'ü™Å', audioText: '‡§™‡§§‡§Ç‡§ó' },
            { letter: '‡§¨', wordMarathi: '‡§¨‡§¶‡§ï', englishWord: 'badak', emoji: 'ü¶Ü', audioText: '‡§¨‡§¶‡§ï' },
            { letter: '‡§≤', wordMarathi: '‡§≤‡§∏‡•Ç‡§£', englishWord: 'lasoon', emoji: 'üßÑ', audioText: '‡§≤‡§∏‡•Ç‡§£' },
            { letter: '‡§ö', wordMarathi: '‡§ö‡§Æ‡§ö‡§æ', englishWord: 'chamcha', emoji: 'ü•Ñ', audioText: '‡§ö‡§Æ‡§ö‡§æ' },
            { letter: '‡§ü', wordMarathi: '‡§ü‡•ã‡§™‡•Ä', englishWord: 'topi', emoji: 'üß¢', audioText: '‡§ü‡•ã‡§™‡•Ä' },
            { letter: '‡§°', wordMarathi: '‡§°‡•ã‡§Ç‡§ó‡§∞', englishWord: 'dongar', emoji: '‚õ∞Ô∏è', audioText: '‡§°‡•ã‡§Ç‡§ó‡§∞' },
            { letter: '‡§§', wordMarathi: '‡§§‡§≤‡§µ‡§æ‡§∞', englishWord: 'talwar', emoji: '‚öîÔ∏è', audioText: '‡§§‡§≤war' },
            { letter: '‡§®', wordMarathi: '‡§®‡§≥', englishWord: 'nal', emoji: 'üö∞', audioText: '‡§®‡§≥' },
            { letter: '‡§´', wordMarathi: '‡§´‡•Å‡§≤', englishWord: 'phool', emoji: 'üå∏', audioText: '‡§´‡•Å‡§≤' },
            { letter: '‡§ó', wordMarathi: '‡§ó‡§æ‡§ú‡§∞', englishWord: 'gajar', emoji: 'ü•ï', audioText: '‡§ó‡§æ‡§ú‡§∞' },
            { letter: '‡§ò', wordMarathi: '‡§ò‡§∞', englishWord: 'ghar', emoji: 'üè†', audioText: '‡§ò‡§∞' },
            { letter: '‡§ù', wordMarathi: '‡§ù‡•á‡§Ç‡§°‡§æ', englishWord: 'jhenda', emoji: 'üö©', audioText: '‡§ù‡•á‡§Ç‡§°‡§æ' },
            { letter: '‡§¢', wordMarathi: '‡§¢‡§ó', englishWord: 'dhag', emoji: '‚òÅÔ∏è', audioText: '‡§¢‡§ó' },
            { letter: '‡§•', wordMarathi: '‡§•‡§∞‡•ç‡§Æ‡•ã‡§Æ‡•Ä‡§ü‡§∞', englishWord: 'thermometer', emoji: 'üå°Ô∏è', audioText: '‡§•‡§∞‡•ç‡§Æ‡•ã‡§Æ‡•Ä‡§ü‡§∞' },
            { letter: '‡§ß', wordMarathi: '‡§ß‡§®‡•Å‡§∑‡•ç‡§Ø', englishWord: 'dhanushya', emoji: 'üèπ', audioText: '‡§ß‡§®‡•Å‡§∑‡•ç‡§Ø' },
            { letter: '‡§µ', wordMarathi: '‡§µ‡§æ‡§ò', englishWord: 'wagh', emoji: 'üêÖ', audioText: '‡§µ‡§æ‡§ò' },
            { letter: '‡§∂', wordMarathi: '‡§∂‡§Ç‡§ñ', englishWord: 'shankh', emoji: 'üêö', audioText: '‡§∂‡§Ç‡§ñ' },
            { letter: '‡§∏', wordMarathi: '‡§∏‡§∏‡§æ', englishWord: 'sasa', emoji: 'üêá', audioText: '‡§∏‡§∏‡§æ' },
            { letter: '‡§π', wordMarathi: '‡§π‡§æ‡§§', englishWord: 'haat', emoji: '‚úã', audioText: '‡§π‡§æ‡§§' },

            // New/Updated entries in primary list
            { letter: '‡§ñ', wordMarathi: '‡§ñ‡§°‡•Ç', englishWord: 'khadu', emoji: 'üñçÔ∏è', audioText: '‡§ñ‡§°‡•Ç' },
            { letter: '‡§õ', wordMarathi: '‡§õ‡§§‡•ç‡§∞‡•Ä', englishWord: 'chhatri', emoji: '‚òÇÔ∏è', audioText: '‡§õ‡§§‡•ç‡§∞‡•Ä' },
            { letter: '‡§†', wordMarathi: '‡§†‡•ã‡§ï‡§≥‡§æ', englishWord: 'thokla', emoji: 'üß±', audioText: '‡§†‡•ã‡§ï‡§≥‡§æ' },
            { letter: '‡§Ø', wordMarathi: '‡§Ø‡§Ç‡§§‡•ç‡§∞', englishWord: 'yantra', emoji: '‚öôÔ∏è', audioText: '‡§Ø‡§Ç‡§§‡•ç‡§∞' },

            // Secondary list (added for randomization)
            { letter: '‡§ï', wordMarathi: '‡§ï‡§Æ‡§≥', englishWord: 'kamal', emoji: 'ü™∑', audioText: '‡§ï‡§Æ‡§≥' },
            { letter: '‡§Æ', wordMarathi: '‡§Æ‡§ó‡§∞', englishWord: 'magar', emoji: 'üêä', audioText: '‡§Æ‡§ó‡§∞' },
            { letter: '‡§™', wordMarathi: '‡§™‡•á‡§∞‡•Ç', englishWord: 'peru', emoji: 'üçê', audioText: '‡§™‡•á‡§∞‡•Ç' },
            { letter: '‡§¨', wordMarathi: '‡§¨‡§∏', englishWord: 'bus', emoji: 'üöå', audioText: '‡§¨‡§∏' },
            { letter: '‡§≤', wordMarathi: '‡§≤‡§æ‡§≤', englishWord: 'lal', emoji: 'üî¥', audioText: '‡§≤‡§æ‡§≤' },
            { letter: '‡§ö', wordMarathi: '‡§ö‡§ø‡§Æ‡§£‡•Ä', englishWord: 'chimni', emoji: 'üê¶', audioText: '‡§ö‡§ø‡§Æ‡§£‡•Ä' },
            { letter: '‡§ü', wordMarathi: '‡§ü‡•ã‡§Æ‡•Ö‡§ü‡•ã', englishWord: 'tomato', emoji: 'üçÖ', audioText: '‡§ü‡•ã‡§Æ‡•Ö‡§ü‡•ã' },
            { letter: '‡§°', wordMarathi: '‡§°‡§¨‡§æ', englishWord: 'daba', emoji: 'üì¶', audioText: '‡§°‡§¨‡§æ' },
            { letter: '‡§§', wordMarathi: '‡§§‡§∞‡§æ‡§ú‡•Ç', englishWord: 'taraju', emoji: '‚öñÔ∏è', audioText: '‡§§‡§∞‡§æ‡§ú‡•Ç' },
            { letter: '‡§®', wordMarathi: '‡§®‡§æ‡§∞‡§≥', englishWord: 'naral', emoji: 'ü••', audioText: '‡§®‡§æ‡§∞‡§≥' },
            { letter: '‡§´', wordMarathi: '‡§´‡§≥‡§æ', englishWord: 'phala', emoji: 'üìù', audioText: '‡§´‡§≥‡§æ' },
            { letter: '‡§ó', wordMarathi: '‡§ó‡§æ‡§ú‡§∞', englishWord: 'gajar', emoji: 'ü•ï', audioText: '‡§ó‡§æ‡§ú‡§∞' },
            { letter: '‡§ò', wordMarathi: '‡§ò‡§°‡•ç‡§Ø‡§æ‡§≥', englishWord: 'ghadyal', emoji: '‚è∞', audioText: '‡§ò‡§°‡•ç‡§Ø‡§æ‡§≥' },
            { letter: '‡§ù', wordMarathi: '‡§ù‡§æ‡§°', englishWord: 'zhad', emoji: 'üå≥', audioText: '‡§ù‡§æ‡§°' },
            { letter: '‡§¢', wordMarathi: '‡§¢‡•ã‡§≤', englishWord: 'dhol', emoji: 'ü™ò', audioText: '‡§¢‡•ã‡§≤' },
            { letter: '‡§•', wordMarathi: '‡§•‡§æ‡§≥‡•Ä', englishWord: 'thali', emoji: 'üçΩÔ∏è', audioText: '‡§•‡§æ‡§≥‡•Ä' },
            { letter: '‡§ß', wordMarathi: '‡§ß‡§æ‡§®‡•ç‡§Ø', englishWord: 'dhanya', emoji: 'üåæ', audioText: '‡§ß‡§æ‡§®‡•ç‡§Ø' },
            { letter: '‡§µ', wordMarathi: '‡§µ‡§∞', englishWord: 'var', emoji: '‚¨ÜÔ∏è', audioText: '‡§µ‡§∞' },
            { letter: '‡§∂', wordMarathi: '‡§∂‡§Ç‡§ñ', englishWord: 'shankh', emoji: 'üêö', audioText: '‡§∂‡§Ç‡§ñ' },
            { letter: '‡§∏', wordMarathi: '‡§∏‡§∏‡§æ', englishWord: 'sasa', emoji: 'üêá', audioText: '‡§∏‡§∏‡§æ' },
            { letter: '‡§π', wordMarathi: '‡§π‡§§‡•ç‡§§‡•Ä', englishWord: 'hatti', emoji: 'üêò', audioText: '‡§π‡§§‡•ç‡§§‡•Ä' },
            // New secondary entries
            { letter: '‡§ñ', wordMarathi: '‡§ñ‡§∞‡•á‡§¶‡•Ä', englishWord: 'kharedi', emoji: 'üõçÔ∏è', audioText: '‡§ñ‡§∞‡•á‡§¶‡•Ä' },
            { letter: '‡§õ', wordMarathi: '‡§õ‡§°‡•Ä', englishWord: 'chhadi', emoji: 'ü¶Ø', audioText: '‡§õ‡§°‡•Ä' },
            { letter: '‡§†', wordMarathi: '‡§†‡•á‡§ö', englishWord: 'thech', emoji: 'ü©π', audioText: '‡§†‡•á‡§ö' },
            { letter: '‡§Ø', wordMarathi: '‡§Ø‡§æ‡§¶‡•Ä', englishWord: 'yadi', emoji: 'üìã', audioText: '‡§Ø‡§æ‡§¶‡•Ä' }
        ];

        // --- Level 1 Specific Data ---
        const level1AlphabetData = [
            // Row 1: Ka Varg
            [
                { letter: '‡§ï', soundText: '‡§ï', words: [
                    { wordMarathi: '‡§ï‡§™', englishWord: 'cup', emoji: '‚òï', audioText: '‡§ï‡§™' },
                    { wordMarathi: '‡§ï‡§Æ‡§≥', englishWord: 'kamal', emoji: 'ü™∑', audioText: '‡§ï‡§Æ‡§≥' },
                    { wordMarathi: '‡§ï‡§£‡•Ä‡§∏', englishWord: 'kanis', emoji: 'üåΩ', audioText: '‡§ï‡§£‡•Ä‡§∏' }
                ]},
                { letter: '‡§ñ', soundText: '‡§ñ', words: [
                    { wordMarathi: '‡§ñ‡§°‡•Ç', englishWord: 'khadu', emoji: 'üñçÔ∏è', audioText: '‡§ñ‡§°‡•Ç' },
                    { wordMarathi: '‡§ñ‡§∞‡•á‡§¶‡•Ä', englishWord: 'kharedi', emoji: 'üõçÔ∏è', audioText: '‡§ñ‡§∞‡•á‡§¶‡•Ä' },
                    { wordMarathi: '‡§ñ‡§ø‡§°‡§ï‡•Ä', englishWord: 'khidki', emoji: 'ü™ü', audioText: 'khidki' }
                ]},
                { letter: '‡§ó', soundText: '‡§ó', words: [
                    { wordMarathi: '‡§ó‡§æ‡§ú‡§∞', englishWord: 'gajar', emoji: 'ü•ï', audioText: '‡§ó‡§æ‡§ú‡§∞' },
                    { wordMarathi: '‡§ó‡§µ‡§§', englishWord: 'gavat', emoji: 'üå±', audioText: '‡§ó‡§µ‡§§' },
                    { wordMarathi: '‡§ó‡§æ‡§¢‡§µ', englishWord: 'gadhav', emoji: 'ü´è', audioText: '‡§ó‡§æ‡§¢‡§µ' }
                ]},
                { letter: '‡§ò', soundText: '‡§ò', words: [
                    { wordMarathi: '‡§ò‡§∞', englishWord: 'ghar', emoji: 'üè†', audioText: '‡§ò‡§∞' },
                    { wordMarathi: '‡§ò‡§°‡•ç‡§Ø‡§æ‡§≥', englishWord: 'ghadyal', emoji: '‚è∞', audioText: '‡§ò‡§°‡•ç‡§Ø‡§æ‡§≥' },
                    { wordMarathi: '‡§ò‡•ã‡§°‡§æ', englishWord: 'ghoda', emoji: 'üêé', audioText: '‡§ò‡•ã‡§°‡§æ' }
                ]}
            ],
            // Row 2: Cha Varg
            [
                { letter: '‡§ö', soundText: '‡§ö', words: [
                    { wordMarathi: '‡§ö‡§Æ‡§ö‡§æ', englishWord: 'chamcha', emoji: 'ü•Ñ', audioText: '‡§ö‡§Æ‡§ö‡§æ' },
                    { wordMarathi: '‡§ö‡§ø‡§Æ‡§£‡•Ä', englishWord: 'chimni', emoji: 'üê¶', audioText: '‡§ö‡§ø‡§Æ‡§£‡•Ä' },
                    { wordMarathi: '‡§ö‡§ï‡•ç‡§∞', englishWord: 'chakra', emoji: '‚ò∏Ô∏è', audioText: '‡§ö‡§ï‡•ç‡§∞' }
                ]},
                { letter: '‡§õ', soundText: '‡§õ', words: [
                    { wordMarathi: '‡§õ‡§§‡•ç‡§∞‡•Ä', englishWord: 'chhatri', emoji: '‚òÇÔ∏è', audioText: '‡§õ‡§§‡•ç‡§∞‡•Ä' },
                    { wordMarathi: '‡§õ‡§°‡•Ä', englishWord: 'chhadi', emoji: 'ü¶Ø', audioText: '‡§õ‡§°‡•Ä' },
                    { wordMarathi: '‡§õ‡§æ‡§®', englishWord: 'chhan', emoji: 'üëç', audioText: '‡§õ‡§æ‡§®' }
                ]},
                { letter: '‡§ú', soundText: '‡§ú', words: [
                    { wordMarathi: '‡§ú‡§π‡§æ‡§ú', englishWord: 'jahaj', emoji: 'üö¢', audioText: '‡§ú‡§π‡§æ‡§ú' },
                    { wordMarathi: '‡§ú‡§æ‡§Ç‡§≠‡•Ç‡§≥', englishWord: 'jambhul', emoji: 'üçá', audioText: '‡§ú‡§æ‡§Ç‡§≠‡•Ç‡§≥' },
                    { wordMarathi: '‡§ú‡§Ç‡§ó‡§≤', englishWord: 'jangal', emoji: 'üèûÔ∏è', audioText: '‡§ú‡§Ç‡§ó‡§≤' }
                ]},
                { letter: '‡§ù', soundText: '‡§ù', words: [
                    { wordMarathi: '‡§ù‡•á‡§Ç‡§°‡§æ', englishWord: 'jhenda', emoji: 'üö©', audioText: '‡§ù‡•á‡§Ç‡§°‡§æ' },
                    { wordMarathi: '‡§ù‡§æ‡§°', englishWord: 'zhad', emoji: 'üå≤', audioText: '‡§ù‡§æ‡§°' },
                    { wordMarathi: '‡§ù‡•á‡§¨‡•ç‡§∞‡§æ', englishWord: 'zebra', emoji: 'ü¶ì', audioText: '‡§ù‡•á‡§¨‡•ç‡§∞‡§æ' }
                ]}
            ],
            // Row 3: Ta Varg
            [
                { letter: '‡§ü', soundText: '‡§ü', words: [
                    { wordMarathi: '‡§ü‡•ã‡§™‡•Ä', englishWord: 'topi', emoji: 'üß¢', audioText: '‡§ü‡•ã‡§™‡•Ä' },
                    { wordMarathi: '‡§ü‡•ã‡§Æ‡•Ö‡§ü‡•ã', englishWord: 'tomato', emoji: 'üçÖ', audioText: '‡§ü‡•ã‡§Æ‡•Ö‡§ü‡•ã' },
                    { wordMarathi: '‡§ü‡§™‡§æ‡§≤', englishWord: 'tapal', emoji: '‚úâÔ∏è', audioText: '‡§ü‡§™‡§æ‡§≤' }
                ]},
                { letter: '‡§†', soundText: '‡§†', words: [
                    { wordMarathi: '‡§†‡•ã‡§ï‡§≥‡§æ', englishWord: 'thokla', emoji: 'üß±', audioText: '‡§†‡•ã‡§ï‡§≥‡§æ' },
                    { wordMarathi: '‡§†‡•á‡§ö', englishWord: 'thech', emoji: 'ü©π', audioText: '‡§†‡•á‡§ö' },
                    { wordMarathi: '‡§†‡§ø‡§™‡§ï‡§æ', englishWord: 'thipka', emoji: '‚ö´', audioText: '‡§†‡§ø‡§™‡§ï‡§æ' }
                ]},
                { letter: '‡§°', soundText: '‡§°', words: [
                    { wordMarathi: '‡§°‡•ã‡§Ç‡§ó‡§∞', englishWord: 'dongar', emoji: '‚õ∞Ô∏è', audioText: '‡§°‡•ã‡§Ç‡§ó‡§∞' },
                    { wordMarathi: '‡§°‡§¨‡§æ', englishWord: 'daba', emoji: 'üì¶', audioText: '‡§°‡§¨‡§æ' },
                    { wordMarathi: '‡§°‡§Æ‡§∞‡•Ç', englishWord: 'damaru', emoji: 'ü•Å', audioText: '‡§°‡§Æ‡§∞‡•Ç' }
                ]},
                { letter: '‡§¢', soundText: '‡§¢', words: [
                    { wordMarathi: '‡§¢‡§ó', englishWord: 'dhag', emoji: '‚òÅÔ∏è', audioText: '‡§¢‡§ó' },
                    { wordMarathi: '‡§¢‡•ã‡§≤', englishWord: 'dhol', emoji: 'ü™ò', audioText: '‡§¢‡•ã‡§≤' },
                    { wordMarathi: '‡§¢‡§ï‡§≤‡§£‡•á', englishWord: 'dhakalne', emoji: '‚û°Ô∏è', audioText: '‡§¢‡§ï‡§≤‡§£‡•á' }
                ]}
            ],
            // Row 4: Ta Varg
            [
                { letter: '‡§§', soundText: '‡§§', words: [
                    { wordMarathi: '‡§§‡§≤‡§µ‡§æ‡§∞', englishWord: 'talwar', emoji: '‚öîÔ∏è', audioText: '‡§§‡§≤‡§µ‡§æ‡§∞' },
                    { wordMarathi: '‡§§‡§∞‡§æ‡§ú‡•Ç', englishWord: 'taraju', emoji: '‚öñÔ∏è', audioText: '‡§§‡§∞‡§æ‡§ú‡•Ç' },
                    { wordMarathi: '‡§§‡§æ‡§∞‡§æ', englishWord: 'tara', emoji: '‚≠ê', audioText: '‡§§‡§æ‡§∞‡§æ' }
                ]},
                { letter: '‡§•', soundText: '‡§•', words: [
                    { wordMarathi: '‡§•‡§∞‡•ç‡§Æ‡•ã‡§Æ‡•Ä‡§ü‡§∞', englishWord: 'thermometer', emoji: 'üå°Ô∏è', audioText: '‡§•‡§∞‡•ç‡§Æ‡•ã‡§Æ‡•Ä‡§ü‡§∞' },
                    { wordMarathi: '‡§•‡§æ‡§≥‡•Ä', englishWord: 'thali', emoji: 'üçΩÔ∏è', audioText: '‡§•‡§æ‡§≥‡•Ä' },
                    { wordMarathi: '‡§•‡§Ç‡§°‡•Ä', englishWord: 'thandi', emoji: 'ü•∂', audioText: '‡§•‡§Ç‡§°‡•Ä' }
                ]},
                { letter: '‡§¶', soundText: '‡§¶', words: [
                    { wordMarathi: '‡§¶‡§ó‡§°', englishWord: 'dagad', emoji: 'ü™®', audioText: '‡§¶‡§ó‡§°' },
                    { wordMarathi: '‡§¶‡§µ‡§æ‡§ñ‡§æ‡§®‡§æ', englishWord: 'davakhana', emoji: 'üè•', audioText: '‡§¶‡§µ‡§æ‡§ñ‡§æ‡§®‡§æ' },
                    { wordMarathi: '‡§¶‡§π‡§æ', englishWord: 'daha', emoji: 'üîü', audioText: '‡§¶‡§π‡§æ' }
                ]},
                { letter: '‡§ß', soundText: '‡§ß', words: [
                    { wordMarathi: '‡§ß‡§®‡•Å‡§∑‡•ç‡§Ø', englishWord: 'dhanushya', emoji: 'üèπ', audioText: '‡§ß‡§®‡•Å‡§∑‡•ç‡§Ø' },
                    { wordMarathi: '‡§ß‡§æ‡§®‡•ç‡§Ø', englishWord: 'dhanya', emoji: 'üåæ', audioText: '‡§ß‡§æ‡§®‡•ç‡§Ø' },
                    { wordMarathi: '‡§ß‡§∞‡§£', englishWord: 'dharan', emoji: 'üåä', audioText: '‡§ß‡§∞‡§£' }
                ]},
                { letter: '‡§®', soundText: '‡§®', words: [
                    { wordMarathi: '‡§®‡§≥', englishWord: 'nal', emoji: 'üö∞', audioText: '‡§®‡§≥' },
                    { wordMarathi: '‡§®‡§æ‡§∞‡§≥', englishWord: 'naral', emoji: 'ü••', audioText: '‡§®‡§æ‡§∞‡§≥' },
                    { wordMarathi: '‡§®‡§¶‡•Ä', englishWord: 'nadi', emoji: 'üèûÔ∏è', audioText: '‡§®‡§¶‡•Ä' }
                ]}
            ],
            // Row 5: Pa Varg
            [
                { letter: '‡§™', soundText: '‡§™', words: [
                    { wordMarathi: '‡§™‡§§‡§Ç‡§ó', englishWord: 'patang', emoji: 'ü™Å', audioText: '‡§™‡§§‡§Ç‡§ó' },
                    { wordMarathi: '‡§™‡•á‡§∞‡•Ç', englishWord: 'peru', emoji: 'üçê', audioText: '‡§™‡•á‡§∞‡•Ç' },
                    { wordMarathi: '‡§™‡§æ‡§ä‡§∏', englishWord: 'paus', emoji: 'üåßÔ∏è', audioText: '‡§™‡§æ‡§ä‡§∏' }
                ]},
                { letter: '‡§´', soundText: '‡§´', words: [
                    { wordMarathi: '‡§´‡•Å‡§≤', englishWord: 'phool', emoji: 'üå∏', audioText: '‡§´‡•Å‡§≤' },
                    { wordMarathi: '‡§´‡§≥‡§æ', englishWord: 'phala', emoji: 'üìù', audioText: '‡§´‡§≥‡§æ' },
                    { wordMarathi: '‡§´‡§£‡§∏', englishWord: 'phanas', emoji: 'üçà', audioText: '‡§´‡§£‡§∏' }
                ]},
                { letter: '‡§¨', soundText: '‡§¨', words: [
                    { wordMarathi: '‡§¨‡§¶‡§ï', englishWord: 'badak', emoji: 'ü¶Ü', audioText: '‡§¨‡§¶‡§ï' },
                    { wordMarathi: '‡§¨‡§∏', englishWord: 'bus', emoji: 'üöå', audioText: '‡§¨‡§∏' },
                    { wordMarathi: '‡§¨‡•Ç‡§ü', englishWord: 'boot', emoji: 'üëû', audioText: '‡§¨‡•Ç‡§ü' }
                ]},
                { letter: '‡§≠', soundText: '‡§≠', words: [
                    { wordMarathi: '‡§≠‡§æ‡§ú‡•Ä', englishWord: 'bhaji', emoji: 'ü•¶', audioText: '‡§≠‡§æ‡§ú‡•Ä' },
                    { wordMarathi: '‡§≠‡•ã‡§ï', englishWord: 'bhok', emoji: 'üï≥Ô∏è', audioText: '‡§≠‡•ã‡§ï' },
                    { wordMarathi: '‡§≠‡§∞‡§£‡•Ä', englishWord: 'bharani', emoji: 'üß∫', audioText: '‡§≠‡§∞‡§£‡•Ä' }
                ]},
                { letter: '‡§Æ', soundText: '‡§Æ', words: [
                    { wordMarathi: '‡§Æ‡§æ‡§∏‡§æ', englishWord: 'masa', emoji: 'üê†', audioText: '‡§Æ‡§æ‡§∏‡§æ' },
                    { wordMarathi: '‡§Æ‡§ó‡§∞', englishWord: 'magar', emoji: 'üêä', audioText: '‡§Æ‡§ó‡§∞' },
                    { wordMarathi: '‡§Æ‡§£‡•Ä', englishWord: 'mani', emoji: 'üìø', audioText: '‡§Æ‡§£‡•Ä' }
                ]}
            ],
            // Row 6: Avargiya Vyanjane (selected few)
            [
                { letter: '‡§Ø', soundText: '‡§Ø', words: [
                    { wordMarathi: '‡§Ø‡§Ç‡§§‡•ç‡§∞', englishWord: 'yantra', emoji: '‚öôÔ∏è', audioText: '‡§Ø‡§Ç‡§§‡•ç‡§∞' },
                    { wordMarathi: '‡§Ø‡§æ‡§¶‡•Ä', englishWord: 'yadi', emoji: 'üìã', audioText: '‡§Ø‡§æ‡§¶‡•Ä' },
                    { wordMarathi: '‡§Ø‡§∂', englishWord: 'yash', emoji: '‚úÖ', audioText: '‡§Ø‡§∂' }
                ]},
                { letter: '‡§∞', soundText: '‡§∞', words: [
                    { wordMarathi: '‡§∞‡§æ‡§§‡•ç‡§∞', englishWord: 'ratra', emoji: 'üåô', audioText: '‡§∞‡§æ‡§§‡•ç‡§∞' },
                    { wordMarathi: '‡§∞‡§∏‡•ç‡§§‡§æ', englishWord: 'rasta', emoji: 'üõ£Ô∏è', audioText: '‡§∞‡§∏‡•ç‡§§‡§æ' },
                    { wordMarathi: '‡§∞‡§Ç‡§ó', englishWord: 'rang', emoji: 'üåà', audioText: '‡§∞‡§Ç‡§ó' }
                ]},
                { letter: '‡§≤', soundText: '‡§≤', words: [
                    { wordMarathi: '‡§≤‡§∏‡•Ç‡§£', englishWord: 'lasoon', emoji: 'üßÑ', audioText: '‡§≤‡§∏‡•Ç‡§£' },
                    { wordMarathi: '‡§≤‡§æ‡§≤', englishWord: 'lal', emoji: 'üî¥', audioText: '‡§≤‡§æ‡§≤' },
                    { wordMarathi: '‡§≤‡§æ‡§°‡•Ç', englishWord: 'ladu', emoji: 'üç°', audioText: '‡§≤‡§æ‡§°‡•Ç' }
                ]},
                { letter: '‡§µ', soundText: '‡§µ', words: [
                    { wordMarathi: '‡§µ‡§æ‡§ò', englishWord: 'wagh', emoji: 'üêÖ', audioText: '‡§µ‡§æ‡§ò' },
                    { wordMarathi: '‡§µ‡§∞', englishWord: 'var', emoji: '‚¨ÜÔ∏è', audioText: '‡§µ‡§∞' },
                    { wordMarathi: '‡§µ‡§ú‡§®', englishWord: 'vajan', emoji: '‚öñÔ∏è', audioText: '‡§µ‡§ú‡§®' }
                ]},
                { letter: '‡§∂', soundText: '‡§∂', words: [
                    { wordMarathi: '‡§∂‡§Ç‡§ñ', englishWord: 'shankh', emoji: 'üêö', audioText: '‡§∂‡§Ç‡§ñ' },
                    { wordMarathi: '‡§∂‡§∞‡•ç‡§ü', englishWord: 'shirt', emoji: 'üëö', audioText: '‡§∂‡§∞‡•ç‡§ü' },
                    { wordMarathi: '‡§∂‡§π‡§∞', englishWord: 'shahar', emoji: 'üèôÔ∏è', audioText: 'shahar' }
                ]},
                { letter: '‡§∏', soundText: '‡§∏', words: [
                    { wordMarathi: '‡§∏‡§∏‡§æ', englishWord: 'sasa', emoji: 'üêá', audioText: '‡§∏‡§∏‡§æ' },
                    { wordMarathi: '‡§∏‡§´‡§∞‡§ö‡§Ç‡§¶', englishWord: 'safarchand', emoji: 'üçé', audioText: '‡§∏‡§´‡§∞‡§ö‡§Ç‡§¶' },
                    { wordMarathi: '‡§∏‡•Ç‡§∞‡•ç‡§Ø', englishWord: 'surya', emoji: '‚òÄÔ∏è', audioText: '‡§∏‡•Ç‡§∞‡•ç‡§Ø' }
                ]},
                { letter: '‡§π', soundText: '‡§π', words: [
                    { wordMarathi: '‡§π‡§æ‡§§', englishWord: 'haat', emoji: '‚úã', audioText: '‡§π‡§æ‡§§' },
                    { wordMarathi: '‡§π‡§§‡•ç‡§§‡•Ä', englishWord: 'hatti', emoji: 'üêò', audioText: '‡§π‡§§‡•ç‡§§‡•Ä' },
                    { wordMarathi: '‡§π‡§∏‡•Ç', englishWord: 'hasu', emoji: 'üòÑ', audioText: '‡§π‡§∏‡•Ç' }
                ]}
            ]
        ];

        // --- Level 3 Specific Data ---
        // Expanded and corrected data for Level 3
        const level3GameData = [
            {
                correctLetter: '‡§ï‡§æ',
                wordMarathi: '‡§ï‡§æ‡§®',
                englishWord: 'kan', // Transliteration
                emoji: 'üëÇ',
                audioText: '‡§ï‡§æ‡§®',
                options: ['‡§ï‡§æ', '‡§ï‡§ø', '‡§ï‡•Å']
            },
            {
                correctLetter: '‡§Æ‡•Ä',
                wordMarathi: '‡§Æ‡•Ä‡§†',
                englishWord: 'mith', // Transliteration
                emoji: 'üßÇ',
                audioText: '‡§Æ‡•Ä‡§†',
                options: ['‡§Æ‡§æ', '‡§Æ‡•Ä', '‡§Æ‡•Ç']
            },
            {
                correctLetter: '‡§™‡•Ç',
                wordMarathi: '‡§™‡•Ç‡§≤',
                englishWord: 'pul', // Transliteration
                emoji: 'üåâ',
                audioText: '‡§™‡•Ç‡§≤',
                options: ['‡§™‡§æ', '‡§™‡•Ä', '‡§™‡•Ç']
            },
            {
                correctLetter: '‡§ù‡•á',
                wordMarathi: '‡§ù‡•á‡§¨‡•ç‡§∞‡§æ',
                englishWord: 'zebra', // Transliteration
                emoji: 'ü¶ì',
                audioText: '‡§ù‡•á‡§¨‡•ç‡§∞‡§æ',
                options: ['‡§ù‡§æ', '‡§ù‡•ã', '‡§ù‡•á']
            },
            {
                correctLetter: '‡§ò‡•ã',
                wordMarathi: '‡§ò‡•ã‡§°‡§æ',
                englishWord: 'ghoda', // Transliteration
                emoji: 'üêé',
                audioText: '‡§ò‡•ã‡§°‡§æ',
                options: ['‡§ò‡§æ', '‡§ò‡•Ä', '‡§ò‡•ã']
            },
            {
                correctLetter: '‡§ö‡•Ç',
                wordMarathi: '‡§ö‡•Ç‡§≥',
                englishWord: 'chul', // Transliteration
                emoji: 'üíß',
                audioText: '‡§ö‡•Ç‡§≥',
                options: ['‡§ö‡§æ', '‡§ö‡•Ä', '‡§ö‡•Ç']
            },
            {
                correctLetter: '‡§ü‡•á',
                wordMarathi: '‡§ü‡•á‡§¨‡§≤',
                englishWord: 'table', // Transliteration
                emoji: 'ü™ë', // Changed to actual table/chair emoji
                audioText: '‡§ü‡•á‡§¨‡§≤',
                options: ['‡§ü‡§æ', '‡§ü‡•Ä', '‡§ü‡•á']
            },
            {
                correctLetter: '‡§°‡•ã',
                wordMarathi: '‡§°‡•ã‡§≥‡§æ',
                englishWord: 'dola', // Transliteration
                emoji: 'üëÅÔ∏è',
                audioText: '‡§°‡•ã‡§≥‡§æ',
                options: ['‡§°‡§æ', '‡§°‡•Ä', '‡§°‡•ã']
            },
            {
                correctLetter: '‡§®‡§æ',
                wordMarathi: '‡§®‡§æ‡§∞‡§≥',
                englishWord: 'naral', // Transliteration
                emoji: 'ü••',
                audioText: '‡§®‡§æ‡§∞‡§≥',
                options: ['‡§®‡§æ', '‡§®‡§ø', '‡§®‡•Å']
            },
            {
                correctLetter: '‡§´‡•Ç',
                wordMarathi: '‡§´‡•Ç‡§≤',
                englishWord: 'phul', // Transliteration
                emoji: 'üå∫',
                audioText: '‡§´‡•Ç‡§≤',
                options: ['‡§´‡§æ', '‡§´‡§ø', '‡§´‡•Ç']
            },
            {
                correctLetter: '‡§¨‡§æ',
                wordMarathi: '‡§¨‡§æ‡§≥',
                englishWord: 'bal', // Transliteration
                emoji: 'üë∂',
                audioText: '‡§¨‡§æ‡§≥',
                options: ['‡§¨‡§æ', '‡§¨‡§ø', '‡§¨‡•Å']
            },
            {
                correctLetter: '‡§≠‡•Ç',
                wordMarathi: '‡§≠‡•Ç‡§ó‡•ã‡§≤',
                englishWord: 'bhugol', // Transliteration
                emoji: 'üåç',
                audioText: '‡§≠‡•Ç‡§ó‡•ã‡§≤',
                options: ['‡§≠‡§æ', '‡§≠‡§ø', '‡§≠‡•Ç']
            },
            {
                correctLetter: '‡§Ø‡•á',
                wordMarathi: '‡§Ø‡•á‡§£‡•á',
                englishWord: 'yene', // Transliteration
                emoji: 'üö∂‚Äç‚ôÄÔ∏è',
                audioText: '‡§Ø‡•á‡§£‡•á',
                options: ['‡§Ø‡§æ', '‡§Ø‡•Ä', '‡§Ø‡•á']
            },
            {
                correctLetter: '‡§∞‡•ã',
                wordMarathi: '‡§∞‡•ã‡§ü‡•Ä',
                englishWord: 'roti', // Transliteration
                emoji: 'üçû',
                audioText: 'roti',
                options: ['‡§∞‡§æ', '‡§∞‡•Ä', '‡§∞‡•ã']
            },
            {
                correctLetter: '‡§≤‡§æ',
                wordMarathi: '‡§≤‡§æ‡§°‡•Ç',
                englishWord: 'ladu', // Transliteration
                emoji: 'üç°',
                audioText: '‡§≤‡§æ‡§°‡•Ç',
                options: ['‡§≤‡§æ', '‡§≤‡§ø', '‡§≤‡•Ç']
            },
            {
                correctLetter: '‡§µ‡§æ',
                wordMarathi: '‡§µ‡§æ‡§ò',
                englishWord: 'wagh', // Transliteration
                emoji: 'üêÖ',
                audioText: '‡§µ‡§æ‡§ò',
                options: ['‡§µ‡§æ', '‡§µ‡§ø', '‡§µ‡•Ç']
            },
            {
                correctLetter: '‡§∂‡•Ä',
                wordMarathi: '‡§∂‡§ø‡§ü‡•ç‡§ü‡•Ä',
                englishWord: 'shitti', // Transliteration
                emoji: 'üé∂',
                audioText: '‡§∂‡§ø‡§ü‡•ç‡§ü‡•Ä',
                options: ['‡§∂‡§æ', '‡§∂‡§ø', '‡§∂‡•Ä']
            },
            {
                correctLetter: '‡§∏‡•Å',
                wordMarathi: '‡§∏‡•Å‡§à',
                englishWord: 'sui', // Transliteration
                emoji: 'ü™°',
                audioText: '‡§∏‡•Å‡§à',
                options: ['‡§∏‡§æ', '‡§∏‡§ø', '‡§∏‡•Å']
            },
            {
                correctLetter: '‡§π‡§æ',
                wordMarathi: '‡§π‡§æ‡§§',
                englishWord: 'haat', // Transliteration
                emoji: '‚úã',
                audioText: '‡§π‡§æ‡§§',
                options: ['‡§π‡§æ', '‡§π‡§ø', '‡§π‡•Å']
            },
            // Additional examples for various modifiers
            {
                correctLetter: '‡§ï‡§ø',
                wordMarathi: '‡§ï‡§ø‡§≤‡•ç‡§≤‡§æ',
                englishWord: 'killa', // Transliteration
                emoji: 'üè∞',
                audioText: '‡§ï‡§ø‡§≤‡•ç‡§≤‡§æ',
                options: ['‡§ï‡§æ', '‡§ï‡§ø', '‡§ï‡•Å']
            },
            {
                correctLetter: '‡§≤‡§ø',
                wordMarathi: '‡§≤‡§ø‡§Ç‡§¨‡•Ç',
                englishWord: 'limbu', // Transliteration
                emoji: 'üçã',
                audioText: '‡§≤‡§ø‡§Ç‡§¨‡•Ç',
                options: ['‡§≤‡§æ', '‡§≤‡§ø', '‡§≤‡•Ç']
            },
            {
                correctLetter: '‡§ó‡•á',
                wordMarathi: '‡§ó‡•á‡§≤‡§æ',
                englishWord: 'gela', // Transliteration
                emoji: 'üö∂‚Äç‚ôÇÔ∏è',
                audioText: '‡§ó‡•á‡§≤‡§æ',
                options: ['‡§ó‡§æ', '‡§ó‡•Ä', '‡§ó‡•á']
            },
            {
                correctLetter: '‡§Æ‡•à',
                wordMarathi: '‡§Æ‡•à‡§¶‡§æ‡§®',
                englishWord: 'maidan', // Transliteration
                emoji: 'üèüÔ∏è',
                audioText: '‡§Æ‡•à‡§¶‡§æ‡§®',
                options: ['‡§Æ‡§æ', '‡§Æ‡•Ä', '‡§Æ‡•à']
            },
            {
                correctLetter: '‡§ï‡•ã',
                wordMarathi: '‡§ï‡•ã‡§≤‡•ç‡§π‡§æ',
                englishWord: 'kolha', // Transliteration
                emoji: 'ü¶ä',
                audioText: '‡§ï‡•ã‡§≤‡•ç‡§π‡§æ',
                options: ['‡§ï‡§æ', '‡§ï‡§ø', '‡§ï‡•ã']
            },
            {
                correctLetter: '‡§∂‡•å',
                wordMarathi: '‡§∂‡•å‡§ö‡§æ‡§≤‡§Ø',
                englishWord: 'shauchalay', // Transliteration
                emoji: 'üöΩ',
                audioText: '‡§∂‡•å‡§ö‡§æ‡§≤‡§Ø',
                options: ['‡§∂‡§æ', '‡§∂‡§ø', '‡§∂‡•å']
            },
            {
                correctLetter: '‡§™‡§Ç',
                wordMarathi: '‡§™‡§Ç‡§ñ',
                englishWord: 'pankh', // Transliteration
                emoji: 'ü™∂',
                audioText: '‡§™‡§Ç‡§ñ',
                options: ['‡§™‡§æ', '‡§™‡•Ä', '‡§™‡§Ç']
            },
            {
                correctLetter: '‡§Ö‡§Ç',
                wordMarathi: '‡§Ö‡§Ç‡§ó‡•Ç‡§∞',
                englishWord: 'angur', // Transliteration
                emoji: 'üçá',
                audioText: '‡§Ö‡§Ç‡§ó‡•Ç‡§∞',
                options: ['‡§Ö', '‡§Ü', '‡§Ö‡§Ç']
            },
            {
                correctLetter: '‡§á',
                wordMarathi: '‡§á‡§Æ‡§æ‡§∞‡§§',
                englishWord: 'imarat', // Transliteration
                emoji: 'üè¢',
                audioText: '‡§á‡§Æ‡§æ‡§∞‡§§',
                options: ['‡§Ö', '‡§Ü', '‡§á']
            },
            {
                correctLetter: '‡§ä',
                wordMarathi: '‡§ä‡§∏',
                englishWord: 'us', // Transliteration
                emoji: 'üå±',
                audioText: '‡§ä‡§∏',
                options: ['‡§Ö', '‡§Ü', '‡§ä']
            },
            {
                correctLetter: '‡§ê',
                wordMarathi: '‡§ê‡§∞‡§£',
                englishWord: 'airan', // Transliteration
                emoji: 'üî®',
                audioText: '‡§ê‡§∞‡§£',
                options: ['‡§è', '‡§ì', '‡§ê']
            },
            {
                correctLetter: '‡§î',
                wordMarathi: '‡§î‡§∑‡§ß',
                englishWord: 'aushadh', // Transliteration
                emoji: 'üíä',
                audioText: '‡§î‡§∑‡§ß',
                options: ['‡§ì', '‡§Ö‡§Ç', '‡§î']
            },
            // New additions based on the plan:
            {
                correctLetter: '‡§ï‡§ø',
                wordMarathi: '‡§ï‡§ø‡§°‡§æ',
                englishWord: 'kida',
                emoji: 'üêõ',
                audioText: '‡§ï‡§ø‡§°‡§æ',
                options: ['‡§ï‡§æ', '‡§ï‡§ø', '‡§ï‡•Ç']
            },
            {
                correctLetter: '‡§∂‡§ø',
                wordMarathi: '‡§∂‡§ø‡§∞',
                englishWord: 'shir',
                emoji: 'üß†',
                audioText: '‡§∂‡§ø‡§∞',
                options: ['‡§∂‡§æ', '‡§∂‡§ø', '‡§∂‡•Å']
            },
            {
                correctLetter: '‡§§‡•Ä',
                wordMarathi: '‡§§‡•Ä‡§∞',
                englishWord: 'teer',
                emoji: 'üèπ',
                audioText: '‡§§‡•Ä‡§∞',
                options: ['‡§§‡§æ', '‡§§‡•Ä', '‡§§‡•Ç']
            },
            {
                correctLetter: '‡§™‡•Ä',
                wordMarathi: '‡§™‡•Ä‡§≥',
                englishWord: 'peel',
                emoji: 'ü•®',
                audioText: '‡§™‡•Ä‡§≥',
                options: ['‡§™‡§æ', '‡§™‡•Ä', '‡§™‡•Ç']
            },
            {
                correctLetter: '‡§ñ‡•Å',
                wordMarathi: '‡§ñ‡•Å‡§∞‡•ç‡§ö‡•Ä',
                englishWord: 'khurchi',
                emoji: 'ü™ë',
                audioText: '‡§ñ‡•Å‡§∞‡•ç‡§ö‡•Ä',
                options: ['‡§ñ‡§æ', '‡§ñ‡§ø', '‡§ñ‡•Å']
            },
            {
                correctLetter: '‡§™‡•Å',
                wordMarathi: '‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø',
                englishWord: 'pustakalay',
                emoji: 'üìö',
                audioText: '‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø',
                options: ['‡§™‡§æ', '‡§™‡§ø', '‡§™‡•Å']
            },
            {
                correctLetter: '‡§ù‡•Å',
                wordMarathi: '‡§ù‡•Å‡§≤‡§æ',
                englishWord: 'jhula',
                emoji: 'üé°',
                audioText: '‡§ù‡•Å‡§≤‡§æ',
                options: ['‡§ù‡§æ', '‡§ù‡§ø', '‡§ù‡•Å']
            },
            {
                correctLetter: '‡§ß‡•Ç',
                wordMarathi: '‡§ß‡•Ç‡§™',
                englishWord: 'dhoop',
                emoji: '‚òÄÔ∏è',
                audioText: '‡§ß‡•Ç‡§™',
                options: ['‡§ß‡§æ', '‡§ß‡§ø', '‡§ß‡•Ç']
            },
            {
                correctLetter: '‡§™‡•á',
                wordMarathi: '‡§™‡•á‡§®',
                englishWord: 'pen',
                emoji: 'üñäÔ∏è',
                audioText: '‡§™‡•á‡§®',
                options: ['‡§™‡§æ', '‡§™‡•Ä', '‡§™‡•á']
            },
            {
                correctLetter: '‡§ï‡•á',
                wordMarathi: '‡§ï‡•á‡§≥‡•Ä',
                englishWord: 'keli',
                emoji: 'üçå',
                audioText: '‡§ï‡•á‡§≥‡•Ä',
                options: ['‡§ï‡§æ', '‡§ï‡§ø', '‡§ï‡•á']
            },
            {
                correctLetter: '‡§™‡•à',
                wordMarathi: '‡§™‡•à‡§∏‡•á',
                englishWord: 'paise',
                emoji: 'üí∞',
                audioText: '‡§™‡•à‡§∏‡•á',
                options: ['‡§™‡§æ', '‡§™‡•Ä', '‡§™‡•à']
            },
            {
                correctLetter: '‡§µ‡•à',
                wordMarathi: '‡§µ‡•à‡§≤‡§£',
                englishWord: 'vailan',
                emoji: 'üë©‚Äçüåæ',
                audioText: '‡§µ‡•à‡§≤‡§£',
                options: ['‡§µ‡§æ', '‡§µ‡§ø', '‡§µ‡•à']
            },
            {
                correctLetter: '‡§™‡•ã',
                wordMarathi: '‡§™‡•ã‡§™‡§ü',
                englishWord: 'popat',
                emoji: 'ü¶ú',
                audioText: '‡§™‡•ã‡§™‡§ü',
                options: ['‡§™‡§æ', '‡§™‡•Ä', '‡§™‡•ã']
            },
            {
                correctLetter: '‡§Æ‡•ã',
                wordMarathi: '‡§Æ‡•ã‡§§‡•Ä',
                englishWord: 'moti',
                emoji: '‚ö™',
                audioText: '‡§Æ‡•ã‡§§‡•Ä',
                options: ['‡§Æ‡§æ', '‡§Æ‡•Ä', '‡§Æ‡•ã']
            },
            {
                correctLetter: '‡§ï‡•å',
                wordMarathi: '‡§ï‡•å‡§≥‡§æ',
                englishWord: 'kaula',
                emoji: 'üß±',
                audioText: '‡§ï‡•å‡§≥‡§æ',
                options: ['‡§ï‡§æ', '‡§ï‡§ø', '‡§ï‡•å']
            },
            {
                correctLetter: '‡§¶‡•å',
                wordMarathi: '‡§¶‡•å‡§§',
                englishWord: 'daut',
                emoji: 'üñãÔ∏è',
                audioText: '‡§¶‡•å‡§§',
                options: ['‡§¶‡§æ', '‡§¶‡§ø', '‡§¶‡•å']
            },
            {
                correctLetter: '‡§ï‡§Ç',
                wordMarathi: '‡§ï‡§Ç‡§ó‡§µ‡§æ',
                englishWord: 'kangava',
                emoji: 'üß¥',
                audioText: '‡§ï‡§Ç‡§ó‡§µ‡§æ',
                options: ['‡§ï‡§æ', '‡§ï‡§ø', '‡§ï‡§Ç']
            },
            {
                correctLetter: '‡§Æ‡§Ç',
                wordMarathi: '‡§Æ‡§Ç‡§¶‡§ø‡§∞‡§æ',
                englishWord: 'mandira',
                emoji: 'üõï',
                audioText: '‡§Æ‡§Ç‡§¶‡§ø‡§∞‡§æ',
                options: ['‡§Æ‡§æ', '‡§Æ‡•Ä', '‡§Æ‡§Ç']
            },
            {
                correctLetter: '‡§™‡•Å‡§®‡§É', // This is a rare case where the full word is the "modifier"
                wordMarathi: '‡§™‡•Å‡§®‡§É',
                englishWord: 'punaha',
                emoji: 'üîÑ',
                audioText: '‡§™‡•Å‡§®‡§É',
                options: ['‡§™‡•Å', '‡§™‡•Å‡§®', '‡§™‡•Å‡§®‡§É'] // Options reflect the full word
            }
        ];

        // DOM elements (declared globally but assigned inside DOMContentLoaded/renderLevel)
        let lettersSection; // Used by Level 2
        let picturesSection; // Used by Level 2
        let feedbackMessage; // Used by Level 2
        let resetBtn; // Used by Level 2
        let svgElement; // Used by Level 2
        let activeLines = []; // Used by Level 2
        let levelContentDiv; // Main content area for levels
        let levelSelectDropdown; // New: Reference to the dropdown

        // --- Level 2 State Variables (Re-initialized on Level 2 load) ---
        let selectedLetterElement = null;
        let selectedPictureElement = null;
        let matchedPairsCount = 0;
        let currentGameData = [];

        // --- Level 1 State Variables ---
        let currentAlphabetRowIndex = 0;
        let selectedLetterData = null; // Stores the data object of the currently selected letter in Level 1

        // --- Level 3 State Variables ---
        let currentLevel3ChallengeIndex = 0; // Will be used as an index into shuffledLevel3GameData
        let shuffledLevel3GameData = []; // New: To hold shuffled challenges
        let currentLevel3Challenge = null;
        let level3FeedbackMessageElement = null;
        let level3NextButton = null;
        let level3OptionsContainer = null;
        let level3PictureDisplay = null;


        /**
         * Shuffles an array randomly.
         * @param {Array} array The array to shuffle.
         * @returns {Array} The shuffled array.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
            return array;
        }

        /**
         * Selects 5 unique random items from allGameData for Level 2.
         * Ensures unique letters are selected. If a letter has multiple entries,
         * one will be chosen randomly.
         */
        function selectRandomGameData() {
            const uniqueLetters = new Set();
            const selectedPairs = [];
            const shuffledAllData = shuffleArray([...allGameData]); // Shuffle a copy of all data

            for (const item of shuffledAllData) {
                if (!uniqueLetters.has(item.letter)) {
                    uniqueLetters.add(item.letter);
                    selectedPairs.push(item);
                    if (selectedPairs.length === 5) {
                        break; // Stop once 5 unique letter pairs are found
                    }
                }
            }
            currentGameData = selectedPairs;
        }

        /**
         * Clears any currently selected elements (Level 2 specific).
         */
        function clearSelections() {
            if (selectedLetterElement) {
                selectedLetterElement.classList.remove('selected', 'incorrect');
                selectedLetterElement = null;
            }
            if (selectedPictureElement) {
                selectedPictureElement.classList.remove('selected', 'incorrect');
                // Hide English word for the cleared picture
                const englishWordSpan = selectedPictureElement.querySelector('.english-word');
                if (englishWordSpan) {
                    englishWordSpan.style.display = 'none';
                }
                selectedPictureElement = null;
            }
            if (feedbackMessage) { // Check if feedbackMessage exists (only in Level 2)
                feedbackMessage.textContent = ''; // Clear feedback when selections are cleared
            }
        }

        /**
         * Plays the audio for a given Marathi word using SpeechSynthesisUtterance.
         * Includes checks for browser support and voice availability.
         * @param {string} wordText The Marathi word to speak.
         */
        function playWordAudio(wordText) {
            console.log('Attempting to play audio for:', wordText);

            if (!('speechSynthesis' in window)) {
                console.error('Speech synthesis not supported in this browser.');
                return;
            }

            const utterance = new SpeechSynthesisUtterance(wordText);
            utterance.rate = 0.8;
            utterance.pitch = 1;
            utterance.volume = 1;

            const setVoiceAndSpeak = () => {
                const voices = speechSynthesis.getVoices();
                console.log('Available voices:', voices.map(v => `${v.name} (${v.lang})`));

                if (voices.length === 0) {
                    console.error('No text-to-speech voices available on your system.');
                    return; // Stop here if no voices are available
                }

                // Try to find a Marathi voice first
                let chosenVoice = voices.find(voice => voice.lang === 'mr-IN');

                // If no Marathi voice, try to find a Hindi voice
                if (!chosenVoice) {
                    chosenVoice = voices.find(voice => voice.lang === 'hi-IN');
                    if (chosenVoice) {
                        console.warn('Marathi voice (mr-IN) not found. Using Hindi voice (hi-IN) as fallback.');
                    } else {
                        console.warn('Neither Marathi (mr-IN) nor Hindi (hi-IN) voice found. Attempting to speak with default voice.');
                    }
                } else {
                    console.log('Marathi voice found and set.');
                }

                if (chosenVoice) {
                    utterance.voice = chosenVoice;
                    // Set language to the chosen voice's language for better pronunciation if a specific voice is found
                    utterance.lang = chosenVoice.lang;
                } else {
                    // If no specific voice found, explicitly set lang to Marathi for potential default voice to try
                    utterance.lang = 'mr-IN';
                }

                try {
                    if (speechSynthesis.speaking) {
                        speechSynthesis.cancel();
                    }
                    speechSynthesis.speak(utterance);
                } catch (error) {
                    console.error('Error during speechSynthesis.speak():', error);
                }
            };

            if (speechSynthesis.getVoices().length > 0) {
                setVoiceAndSpeak();
            } else {
                speechSynthesis.onvoiceschanged = () => {
                    setVoiceAndSpeak();
                    speechSynthesis.onvoiceschanged = null;
                };
            }

            utterance.onerror = (event) => {
                console.error('Speech synthesis error:', event.error);
            };
        }

        // --- Level 2 Specific Functions ---
        /**
         * Handles the click event on a letter box (Level 2).
         * @param {Event} e The click event.
         */
        function handleLetterClick(e) {
            const clickedLetter = e.currentTarget;

            // If this letter is already matched, do nothing
            if (clickedLetter.classList.contains('matched')) {
                return;
            }

            // If a picture is already selected, attempt a match with this letter
            if (selectedPictureElement) {
                selectedLetterElement = clickedLetter; // Temporarily select the letter for matching
                selectedLetterElement.classList.add('selected'); // Highlight it
                attemptMatch();
            } else {
                // If no picture is selected, prompt to select a picture first
                feedbackMessage.textContent = '‡§™‡•ç‡§∞‡§•‡§Æ ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ. (Select a picture first.)';
            }
        }

        /**
         * Handles the click event on a picture item (Level 2).
         * @param {Event} e The click event.
         */
        function handlePictureClick(e) {
            const clickedPicture = e.currentTarget;

            // If this picture is already matched, do nothing
            if (clickedPicture.classList.contains('matched')) {
                return;
            }

            // Play audio for the clicked picture
            // Find the audioText from currentGameData based on the picture's dataset.letter
            const pictureData = currentGameData.find(data => `picture-${data.letter}` === clickedPicture.id);
            if (pictureData) {
                playWordAudio(pictureData.audioText);

                // Show the English word
                const englishWordSpan = clickedPicture.querySelector('.english-word');
                if (englishWordSpan) {
                    englishWordSpan.textContent = pictureData.englishWord; // Set text
                    englishWordSpan.style.display = 'block'; // Show it
                }
            }

            // Clear any previous picture selection highlight
            if (selectedPictureElement && selectedPictureElement !== clickedPicture) {
                selectedPictureElement.classList.remove('selected', 'incorrect');
                // Hide English word for previously selected picture
                const prevEnglishWordSpan = selectedPictureElement.querySelector('.english-word');
                if (prevEnglishWordSpan) {
                    prevEnglishWordSpan.style.display = 'none';
                }
            }

            // Select the new picture
            selectedPictureElement = clickedPicture;
            selectedPictureElement.classList.add('selected');
            feedbackMessage.textContent = '‡§Ü‡§§‡§æ ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ. (Now select a letter.)';

            // If a letter was already selected, attempt a match (shouldn't happen in this flow unless user clicks picture then letter then another picture)
            if (selectedLetterElement) {
                attemptMatch();
            }
        }

        /**
         * Attempts to match the currently selected picture and letter (Level 2).
         */
        function attemptMatch() {
            if (!selectedPictureElement || !selectedLetterElement) {
                return; // Need both a picture and a letter selected
            }

            const pictureLetter = selectedPictureElement.dataset.letter; // The letter this picture corresponds to
            const letter = selectedLetterElement.textContent;

            if (letter === pictureLetter) {
                // Correct match
                selectedLetterElement.classList.add('correct-match', 'matched');
                selectedPictureElement.classList.add('correct-match', 'matched');
                matchedPairsCount++;
                feedbackMessage.textContent = '‡§¨‡§∞‡•ã‡§¨‡§∞! (Correct!)';

                // Draw the line
                drawLine(selectedPictureElement, selectedLetterElement);


                // Disable further interaction for matched elements
                selectedLetterElement.removeEventListener('click', handleLetterClick);
                selectedPictureElement.removeEventListener('click', handlePictureClick);

                // Check if all pairs are matched
                if (matchedPairsCount === currentGameData.length) {
                    feedbackMessage.textContent = '‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü! ‡§∏‡§∞‡•ç‡§µ ‡§ú‡•ã‡§°‡•ç‡§Ø‡§æ ‡§ú‡•Å‡§≥‡§≤‡•ç‡§Ø‡§æ! (Excellent! All pairs matched!)';
                }

            } else {
                // Incorrect match
                selectedLetterElement.classList.add('incorrect');
                selectedPictureElement.classList.add('incorrect');
                feedbackMessage.textContent = '‡§ö‡•Å‡§ï‡•Ä‡§ö‡•á! ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ. (Incorrect! Try again.)';

                // Briefly show incorrect state, then reset
                setTimeout(() => {
                    selectedLetterElement.classList.remove('incorrect', 'selected'); // Remove selected from letter
                    selectedLetterElement = null; // Clear letter selection
                    selectedPictureElement.classList.remove('incorrect'); // Remove incorrect from picture, but keep selected
                    // Hide English word for incorrect match after timeout
                    const incorrectEnglishWordSpan = selectedPictureElement.querySelector('.english-word');
                    if (incorrectEnglishWordSpan) {
                        incorrectEnglishWordSpan.style.display = 'none';
                    }
                    feedbackMessage.textContent = '';
                }, 800); // Show red for 0.8 seconds
            }
            // Clear selected picture only if it was a correct match, otherwise it stays selected
            if (letter === pictureLetter) {
                clearSelections();
            }
        }

        /**
         * Draws an SVG line between two DOM elements (Level 2).
         * @param {HTMLElement} element1 The first element (e.g., picture item).
         * @param {HTMLElement} element2 The second element (e.g., letter box).
         */
        function drawLine(element1, element2) {
            const svgRect = svgElement.getBoundingClientRect(); // Get SVG's own position

            const rect1 = element1.getBoundingClientRect();
            const rect2 = element2.getBoundingClientRect();

            // Calculate the points for the line to start from the edge, not center
            const x1_viewport = rect1.right; // Right edge of element1
            const y1_viewport = rect1.top + rect1.height / 2; // Vertical center of element1
            const x2_viewport = rect2.left; // Left edge of element2
            const y2_viewport = rect2.top + rect2.height / 2; // Vertical center of element2

            // Convert viewport coordinates to SVG coordinates
            const svgX1 = x1_viewport - svgRect.left;
            const svgY1 = y1_viewport - svgRect.top;
            const svgX2 = x2_viewport - svgRect.left;
            const svgY2 = y2_viewport - svgRect.top;

            console.log(`Drawing line from (${svgX1}, ${svgY1}) to (${svgX2}, ${svgY2})`);

            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
            line.setAttribute("x1", svgX1);
            line.setAttribute("y1", svgY1);
            line.setAttribute("x2", svgX2);
            line.setAttribute("y2", svgY2);
            svgElement.appendChild(line);
            activeLines.push(line);
        }

        /**
         * Initializes the game for Level 2.
         */
        function initGame() {
            selectRandomGameData(); // Select a new set of data for the current game

            // Clear existing content
            lettersSection.innerHTML = '';
            picturesSection.innerHTML = '';
            feedbackMessage.textContent = '';
            matchedPairsCount = 0;
            clearSelections(); // Ensure no lingering selections
            activeLines.forEach(line => line.remove()); // Remove all previous lines
            activeLines = [];

            // Create letter boxes based on currentGameData
            currentGameData.forEach(data => {
                const letterBox = document.createElement('div');
                letterBox.id = `letter-${data.letter}`;
                letterBox.classList.add('letter-box');
                letterBox.textContent = data.letter;
                letterBox.dataset.correctPictureId = `picture-${data.letter}`;
                letterBox.addEventListener('click', handleLetterClick); // Add click listener
                lettersSection.appendChild(letterBox);
            });

            // Create and shuffle picture items based on currentGameData
            const shuffledPictures = shuffleArray([...currentGameData]);
            shuffledPictures.forEach(data => {
                const pictureItem = document.createElement('div');
                pictureItem.id = `picture-${data.letter}`;
                pictureItem.classList.add('picture-item');
                pictureItem.dataset.letter = data.letter;

                const emojiSpan = document.createElement('span');
                emojiSpan.classList.add('emoji');
                emojiSpan.textContent = data.emoji;
                pictureItem.appendChild(emojiSpan);

                // Add a span for the English word, initially hidden
                const englishWordSpan = document.createElement('span');
                englishWordSpan.classList.add('english-word');
                englishWordSpan.textContent = data.englishWord; // Use the new property
                pictureItem.appendChild(englishWordSpan);

                pictureItem.addEventListener('click', handlePictureClick); // Add click listener
                picturesSection.appendChild(pictureItem);
            });

            // Add event listener for reset button (ensure it's only added once)
            if (!resetBtn.dataset.listenerAttached) {
                resetBtn.addEventListener('click', resetGame);
                resetBtn.dataset.listenerAttached = 'true';
            }
        }

        /**
         * Resets the game to its initial state (Level 2).
         */
        function resetGame() {
            matchedPairsCount = 0; // Reset matched pairs count
            initGame(); // Re-initialize to select new letters and reset everything
        }

        // --- Level 1 Specific Functions ---

        /**
         * Plays the audio for a single Marathi letter.
         * @param {string} letterText The Marathi letter to speak.
         */
        function playLetterAudio(letterText) {
            playWordAudio(letterText); // Re-use existing audio function
        }

        /**
         * Renders the current row of Marathi letters for Level 1.
         */
        function renderAlphabetRow() {
            const letterRowDisplay = document.getElementById('letter-row-display');
            letterRowDisplay.innerHTML = ''; // Clear previous letters

            const currentRow = level1AlphabetData[currentAlphabetRowIndex];

            // Ensure selectedLetterData points to the correct object for the current row
            // This handles initial load and navigation
            if (!selectedLetterData || !currentRow.some(item => item.letter === selectedLetterData.letter)) {
                selectedLetterData = currentRow[0]; // Default to the first letter of the current row
            }

            currentRow.forEach((letterData, index) => {
                const letterBox = document.createElement('div');
                letterBox.classList.add('level1-letter-box');
                letterBox.textContent = letterData.letter;
                letterBox.dataset.letterIndex = index; // Store index for selection

                // Mark as selected if it matches the current selectedLetterData
                if (selectedLetterData && letterData.letter === selectedLetterData.letter) {
                    letterBox.classList.add('selected');
                }

                letterBox.addEventListener('click', () => {
                    // Remove 'selected' from previously selected letter
                    const currentlySelected = letterRowDisplay.querySelector('.level1-letter-box.selected');
                    if (currentlySelected) {
                        currentlySelected.classList.remove('selected');
                    }

                    // Add 'selected' to the clicked letter
                    letterBox.classList.add('selected');
                    selectedLetterData = letterData; // Update global selected letter data
                    playLetterAudio(letterData.soundText); // Play letter sound
                    renderPicturesForLetter(letterData); // Render pictures for this letter
                });
                letterRowDisplay.appendChild(letterBox);
            });

            // ALWAYS render pictures for the currently selected letter after the row is built
            if (selectedLetterData) {
                renderPicturesForLetter(selectedLetterData);
            }

            // Update navigation button states
            document.getElementById('prev-row-btn').disabled = currentAlphabetRowIndex === 0;
            document.getElementById('next-row-btn').disabled = currentAlphabetRowIndex === level1AlphabetData.length - 1;
        }

        /**
         * Renders pictures for the given letter data in Level 1.
         * @param {Object} letterData The data object for the selected letter.
         */
        function renderPicturesForLetter(letterData) {
            const pictureDisplay = document.getElementById('picture-display');
            pictureDisplay.innerHTML = ''; // Clear previous pictures

            // Do NOT shuffle the words for the current letter to maintain fixed order
            const orderedWords = [...letterData.words]; // Use a copy to ensure original data is not modified

            // Only display 3 to 5 pictures (or fewer if not enough words)
            const numPicturesToShow = Math.min(orderedWords.length, Math.floor(Math.random() * 3) + 3); // Randomly 3, 4, or 5

            for (let i = 0; i < numPicturesToShow; i++) {
                const wordData = orderedWords[i]; // Use orderedWords instead of shuffledWords
                const pictureItem = document.createElement('div');
                pictureItem.classList.add('level1-picture-item');

                const emojiSpan = document.createElement('span');
                emojiSpan.classList.add('emoji');
                emojiSpan.textContent = wordData.emoji;
                pictureItem.appendChild(emojiSpan);

                const englishWordSpan = document.createElement('span');
                englishWordSpan.classList.add('english-word');
                englishWordSpan.textContent = wordData.englishWord; // This property already holds the transliterated Marathi word
                pictureItem.appendChild(englishWordSpan);

                pictureItem.addEventListener('click', () => {
                    playWordAudio(wordData.audioText); // Play word sound
                });
                pictureDisplay.appendChild(pictureItem);
            }
        }

        /**
         * Handles navigation between alphabet rows in Level 1.
         * @param {number} direction -1 for previous, 1 for next.
         */
        function navigateAlphabetRows(direction) {
            currentAlphabetRowIndex += direction;
            if (currentAlphabetRowIndex < 0) {
                currentAlphabetRowIndex = 0;
            } else if (currentAlphabetRowIndex >= level1AlphabetData.length) {
                currentAlphabetRowIndex = level1AlphabetData.length - 1;
            }
            // After changing row, reset selected letter to the first one in the new row
            selectedLetterData = level1AlphabetData[currentAlphabetRowIndex][0]; // This line ensures the first letter of the new row is selected
            renderAlphabetRow(); // Re-render the row and pictures
        }

        // --- Level 3 Specific Functions ---

        /**
         * Loads and displays the current challenge for Level 3.
         */
        function loadNextLevel3Challenge() {
            // Reset feedback and next button
            level3FeedbackMessageElement.textContent = '';
            level3NextButton.style.display = 'none';
            level3OptionsContainer.innerHTML = ''; // Clear previous options

            // If all challenges in the shuffled list have been presented, reshuffle
            if (currentLevel3ChallengeIndex >= shuffledLevel3GameData.length) {
                shuffledLevel3GameData = shuffleArray([...level3GameData]); // Reshuffle
                currentLevel3ChallengeIndex = 0; // Reset index
                console.log('All Level 3 challenges completed. Reshuffling for new round.');
            }

            currentLevel3Challenge = shuffledLevel3GameData[currentLevel3ChallengeIndex];

            // Update picture display - now showing English transliteration
            level3PictureDisplay.innerHTML = `
                <span class="emoji">${currentLevel3Challenge.emoji}</span>
                <span class="marathi-word">${currentLevel3Challenge.englishWord}</span> <!-- Changed to englishWord -->
            `;
            // Re-attach click listener for the picture display
            level3PictureDisplay.onclick = () => playWordAudio(currentLevel3Challenge.audioText);

            // Create options
            const shuffledOptions = shuffleArray([...currentLevel3Challenge.options]);
            shuffledOptions.forEach(option => {
                const optionBox = document.createElement('div');
                optionBox.classList.add('level3-option-box');
                optionBox.textContent = option;
                optionBox.dataset.value = option; // Store the option value
                optionBox.addEventListener('click', handleLevel3OptionClick);
                level3OptionsContainer.appendChild(optionBox);
            });
        }

        /**
         * Handles click on a Level 3 option box.
         * @param {Event} e The click event.
         */
        function handleLevel3OptionClick(e) {
            const clickedOption = e.currentTarget;
            const selectedValue = clickedOption.dataset.value;

            // Remove previous feedback classes from all options
            Array.from(level3OptionsContainer.children).forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });

            clickedOption.classList.add('selected'); // Highlight selected option

            if (selectedValue === currentLevel3Challenge.correctLetter) {
                clickedOption.classList.add('correct');
                level3FeedbackMessageElement.textContent = '‡§¨‡§∞‡•ã‡§¨‡§∞! (Correct!)';
                level3NextButton.style.display = 'block'; // Show next button
                // Disable all options after correct answer
                Array.from(level3OptionsContainer.children).forEach(option => {
                    option.removeEventListener('click', handleLevel3OptionClick);
                });
            } else {
                clickedOption.classList.add('incorrect');
                level3FeedbackMessageElement.textContent = '‡§ö‡•Å‡§ï‡•Ä‡§ö‡•á! ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ. (Incorrect! Try again.)';
                playWordAudio(selectedValue); // Play the sound of the incorrect option tapped
                // Allow user to re-select
                setTimeout(() => {
                    clickedOption.classList.remove('selected', 'incorrect');
                    level3FeedbackMessageElement.textContent = '';
                }, 800);
            }
        }

        /**
         * Advances to the next challenge in Level 3.
         */
        function nextLevel3Challenge() {
            currentLevel3ChallengeIndex++;
            loadNextLevel3Challenge();
        }

        // --- Level Management Logic (Main App) ---
        const level1HTML = `
            <div class="level1-container">
                <div id="letter-row-display" class="letter-row-display"></div>
                <div class="navigation-buttons">
                    <button id="prev-row-btn" class="nav-button">‚Üê</button>
                    <button id="next-row-btn" class="nav-button">‚Üí</button>
                </div>
                <div id="picture-display" class="picture-display"></div>
            </div>
        `;

        // The HTML structure for Level 2 (the current game)
        const level2GameHTML = `
            <div class="game-container">
                <div class="columns-wrapper">
                    <div id="pictures-section" class="pictures-section"></div>
                    <div id="letters-section" class="letters-section"></div>
                </div>
                <svg id="match-lines-svg" class="match-lines-svg"></svg>
                <div class="w-full flex flex-col items-center">
                    <div class="buttons-container">
                        <button id="reset-btn" class="game-button">‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§ñ‡•á‡§≥‡§æ (Play Again)</button>
                    </div>
                    <div id="feedback-message" class="feedback-message"></div>
                </div>
            </div>
        `;

        const level3HTML = `
            <div class="level3-container">
                <div class="level3-challenge-area">
                    <div id="level3-picture-display" class="level3-picture-display">
                        <!-- Picture and Marathi word will be loaded here -->
                    </div>
                    <div id="level3-options-container" class="level3-options-container">
                        <!-- Options will be loaded here -->
                    </div>
                    <button id="level3-next-button" class="level3-next-button" style="display:none;">‡§™‡•Å‡§¢‡•Ä‡§≤ (Next)</button>
                    <div id="level3-feedback-message" class="level3-feedback-message"></div>
                </div>
            </div>
        `;

        const placeholderHTML = `
            <div class="placeholder-level">
                <p>Coming Soon!</p>
                <p>‡§®‡§µ‡•Ä‡§® ‡§∏‡•ç‡§§‡§∞ ‡§≤‡§µ‡§ï‡§∞‡§ö ‡§Ø‡•á‡§§ ‡§Ü‡§π‡•á‡§§!</p>
            </div>
        `;

        function renderLevel(level) {
            // Set the dropdown value to the current level
            if (levelSelectDropdown) {
                levelSelectDropdown.value = level;
            }

            // Clear previous content
            levelContentDiv.innerHTML = '';
            // Reset global DOM element references specific to levels
            // Level 2 elements
            lettersSection = null;
            picturesSection = null;
            feedbackMessage = null;
            resetBtn = null;
            svgElement = null;
            activeLines = [];
            // Level 1 elements (no need to reset these as they are dynamically created within renderLevel1)
            currentAlphabetRowIndex = 0; // Reset Level 1 row index
            selectedLetterData = null; // Reset Level 1 selected letter
            // Level 3 elements
            currentLevel3ChallengeIndex = 0;
            shuffledLevel3GameData = []; // Clear and re-shuffle for Level 3
            currentLevel3Challenge = null;
            level3FeedbackMessageElement = null;
            level3NextButton = null;
            level3OptionsContainer = null;
            level3PictureDisplay = null;


            if (level === 1) {
                levelContentDiv.innerHTML = level1HTML;
                // Attach Level 1 specific event listeners after rendering HTML
                document.getElementById('prev-row-btn').addEventListener('click', () => navigateAlphabetRows(-1));
                document.getElementById('next-row-btn').addEventListener('click', () => navigateAlphabetRows(1));
                renderAlphabetRow(); // Initial render for Level 1
            } else if (level === 2) {
                levelContentDiv.innerHTML = level2GameHTML;
                // Re-assign DOM elements for Level 2 after it's rendered
                lettersSection = document.getElementById('letters-section');
                picturesSection = document.getElementById('pictures-section');
                feedbackMessage = document.getElementById('feedback-message');
                resetBtn = document.getElementById('reset-btn');
                svgElement = document.getElementById('match-lines-svg');
                initGame(); // Initialize the game for Level 2
            } else if (level === 3) {
                levelContentDiv.innerHTML = level3HTML;
                // Assign Level 3 DOM elements
                level3PictureDisplay = document.getElementById('level3-picture-display');
                level3OptionsContainer = document.getElementById('level3-options-container');
                level3FeedbackMessageElement = document.getElementById('level3-feedback-message');
                level3NextButton = document.getElementById('level3-next-button');

                // Shuffle Level 3 data once when the level is loaded
                shuffledLevel3GameData = shuffleArray([...level3GameData]);
                currentLevel3ChallengeIndex = 0; // Start from the beginning of the shuffled list

                level3NextButton.addEventListener('click', nextLevel3Challenge);
                loadNextLevel3Challenge(); // Start the first challenge for Level 3
            } else if (level === 4 || level === 5) {
                levelContentDiv.innerHTML = placeholderHTML;
            }
        }

        // Initialize the app when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', (event) => {
            levelContentDiv = document.getElementById('level-content');
            levelSelectDropdown = document.getElementById('level-select-dropdown');

            // Attach event listener to the dropdown
            levelSelectDropdown.addEventListener('change', (e) => {
                renderLevel(parseInt(e.target.value));
            });

            // Render Level 1 initially (as it is now the default)
            renderLevel(1);
        });

    </script>
</body>
</html>
